// ==========================================
// 1. INTERACTIONS VISUELLES (Votre code existant)
// ==========================================

// Mobile Menu Toggle
const mobileMenuBtn = document.getElementById('mobile-menu-btn');
const mobileMenu = document.getElementById('mobile-menu');

if (mobileMenuBtn && mobileMenu) {
    mobileMenuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    // Close mobile menu when clicking a link
    mobileMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            mobileMenu.classList.add('hidden');
        });
    });
}

// Navbar Scroll Effect
const navbar = document.getElementById('navbar');
if (navbar) {
    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });
}

// ==========================================
// 2. CHARGEMENT DU CONTENU DEPUIS LE JSON
// ==========================================

// On récupère le fichier data/content.json
fetch('data/content.json')
    .then(response => response.json())
    .then(data => {
        console.log("Données chargées :", data);

        // --- Mise à jour du Hero ---
        if (data.homepage) {
            const heroTitle = document.getElementById('hero-title');
            const heroSubtitle = document.getElementById('hero-subtitle');
            
            if (heroTitle) heroTitle.textContent = data.homepage.hero_title;
            if (heroSubtitle) heroSubtitle.textContent = data.homepage.hero_subtitle;
        }

        // --- Mise à jour de la Section Vision ---
        // Note: Pour le Markdown, il faut une petite librairie ou utiliser innerHTML si le texte est simple
        if (data.homepage && data.homepage.vision_text) {
            const visionText = document.getElementById('vision-text');
            if (visionText) visionText.innerHTML = data.homepage.vision_text; 
        }

        // --- Mise à jour de la Section Expert ---
        if (data.expert_section) {
            const expertBio = document.getElementById('expert-bio');
            const bookFnac = document.getElementById('book-fnac-link');
            const bookAmazon = document.getElementById('book-amazon-link');

            if (expertBio) expertBio.innerHTML = data.expert_section.bio;
            
            // Pour les liens, on met à jour l'attribut href
            if (bookFnac) bookFnac.href = data.expert_section.book_fnac;
            if (bookAmazon) bookAmazon.href = data.expert_section.book_amazon;
        }
    })
    .catch(error => {
        console.error("Erreur lors du chargement du contenu :", error);
    });
