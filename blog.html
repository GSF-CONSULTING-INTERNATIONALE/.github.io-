<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Blog GSF Consulting - Actualit√©s sur l'IA Juridique, le Droit OHADA et l'innovation en Afrique.">
    <title>Blog & Actualit√©s | GSF Consulting International</title>

    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">

    <!-- ‚úÖ Ajout de marked.js pour le rendu Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        body { background-color: #050505; color: white; font-family: 'Space Grotesk', sans-serif; margin: 0; }
        .container { max-width: 1200px; margin: 0 auto; padding: 120px 20px 50px; }
        h1 { font-family: 'Syne', sans-serif; font-size: 3rem; color: #06b6d4; margin-bottom: 50px; text-transform: uppercase; }

        /* Grille des articles */
        .blog-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }

        /* Carte Article */
        .article-card { background: rgba(255, 255, 255, 0.05); border: 1px solid #333; border-radius: 15px; overflow: hidden; transition: 0.3s; }
        .article-card:hover { border-color: #06b6d4; transform: translateY(-5px); }

        .article-img { height: 200px; background: #111; width: 100%; object-fit: cover; }

        .article-content { padding: 25px; }
        .article-date { font-size: 0.85rem; color: #06b6d4; margin-bottom: 10px; }
        .article-title { font-family: 'Syne', sans-serif; font-size: 1.5rem; margin-bottom: 15px; color: #fff; }
        .article-excerpt { font-size: 1rem; color: #aaa; line-height: 1.6; }

        .btn-read { display: inline-block; margin-top: 20px; color: #06b6d4; font-weight: bold; text-decoration: none; }
        .btn-read:hover { text-decoration: underline; }

        /* Modal pour lire l'article complet */
        #modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; overflow-y: auto; }
        .modal-content { max-width: 800px; margin: 50px auto; background: #0a0a0a; padding: 50px; border-radius: 20px; position: relative; border: 1px solid #06b6d4; }
        .close-btn { position: absolute; top: 20px; right: 20px; color: white; font-size: 2rem; cursor: pointer; }

        .back-link { display: inline-block; margin-bottom: 30px; padding: 10px 20px; border: 1px solid #06b6d4; border-radius: 5px; color: #06b6d4; transition: 0.3s; text-decoration: none; }
        .back-link:hover { background: #06b6d4; color: black; }

        /* ‚úÖ Styles suppl√©mentaires pour le contenu Markdown */
        .article-full-content h1, .article-full-content h2, .article-full-content h3 {
            font-family: 'Syne', sans-serif;
            color: #06b6d4;
            margin-top: 1.5em;
        }
        .article-full-content h2 { font-size: 2rem; }
        .article-full-content h3 { font-size: 1.5rem; }
        .article-full-content p { margin-bottom: 1em; line-height: 1.8; }
        .article-full-content ul, .article-full-content ol { margin: 1em 0 1em 2em; }
        .article-full-content a { color: #06b6d4; }
        .article-full-content img { max-width: 100%; border-radius: 5px; margin: 1em 0; }
    </style>
</head>
<body>
    <!-- Navigation Rapide -->
    <nav style="position: fixed; top: 0; width: 100%; padding: 20px; background: rgba(5,5,5,0.9); z-index: 1000; display: flex; justify-content: space-between; align-items: center;">
        <a href="index.html" class="logo" style="font-family: 'Syne'; font-weight: 800; font-size: 1.5rem; color: #06b6d4;">GSF CONSULTING</a>
        <a href="index.html" class="back-link">Retour au site</a>
    </nav>

    <div class="container">
        <h1>Actualit√©s & IA Juridique</h1>

        <!-- Grille qui sera remplie par le JS -->
        <div id="blog-grid" class="blog-grid">
            <p>Chargement des articles...</p>
        </div>
    </div>

    <!-- Fen√™tre Modale pour afficher l'article complet -->
    <div id="modal-overlay">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <a href="index.html" class="back-link" style="display: inline-block; margin-bottom: 20px;">‚Üê Retour au site</a>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        // ‚úÖ Configuration de marked.js pour un rendu optimal
        marked.setOptions({
            breaks: true,
            gfm: true,
            headerIds: false,
            smartypants: true
        });

        // Chargement des articles depuis le JSON
        fetch('data/content.json')
            .then(response => response.json())
            .then(data => {
                const grid = document.getElementById('blog-grid');
                grid.innerHTML = ''; // Vider le "chargement..."

                // V√©rifier s'il y a des articles
                if (!data.blog_posts || data.blog_posts.length === 0) {
                    grid.innerHTML = '<p style="grid-column: 1 / -1; text-align: center;">Aucun article pour le moment.</p>';
                    return;
                }

                // Cr√©er une carte pour chaque article
                data.blog_posts.forEach((post, index) => {
                    const card = document.createElement('div');
                    card.className = 'article-card';

                    // Formatage de la date
                    const dateObj = new Date(post.date);
                    const dateStr = dateObj.toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' });

                    card.innerHTML = `
                        ${post.image ? `<img src="${post.image}" class="article-img" alt="${post.title}">` : '<div class="article-img" style="display:flex;align-items:center;justify-content:center;border-bottom:1px solid #333; font-size: 3rem;">üì∞</div>'}
                        <div class="article-content">
                            <div class="article-date">${dateStr}</div>
                            <h2 class="article-title">${post.title}</h2>
                            <p class="article-excerpt">${post.excerpt}</p>
                            <a href="#" class="btn-read" onclick="openArticle(${index}); return false;">Lire la suite ‚Üí</a>
                        </div>
                    `;
                    grid.appendChild(card);
                });

                // On stocke les donn√©es dans une variable globale pour la modale
                window.blogData = data.blog_posts;
            })
            .catch(err => {
                console.error("Erreur chargement blog:", err);
                document.getElementById('blog-grid').innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: #ff6b6b;">Erreur de chargement des articles. Veuillez rafra√Æchir la page.</p>';
            });

        // ‚úÖ Fonction optimis√©e pour ouvrir l'article avec marked.js
        function openArticle(index) {
            const post = window.blogData[index];
            const dateObj = new Date(post.date);
            const dateStr = dateObj.toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' });

            // ‚úÖ Utilisation compl√®te de marked.js pour le contenu
            const bodyHtml = marked.parse(post.body);

            document.getElementById('modal-body').innerHTML = `
                <h2 style="font-family: 'Syne'; font-size: 2.5rem; margin-bottom: 10px; color: #06b6d4;">${post.title}</h2>
                <div style="color: #888; margin-bottom: 30px; font-size: 0.9rem;">Publi√© le ${dateStr}</div>
                ${post.image ? `<img src="${post.image}" style="width:100%; border-radius:10px; margin-bottom:30px; border: 1px solid #333;">` : ''}
                <div class="article-full-content" style="line-height: 1.8; color: #ddd; font-size: 1.1rem;">
                    ${bodyHtml}
                </div>
            `;

            document.getElementById('modal-overlay').style.display = "block";
            document.body.style.overflow = "hidden";

            // ‚úÖ Ajout d'un gestionnaire pour fermer la modale en cliquant dehors
            document.getElementById('modal-overlay').onclick = function(e) {
                if (e.target === this) closeModal();
            };
        }

        function closeModal() {
            document.getElementById('modal-overlay').style.display = "none";
            document.body.style.overflow = "auto";
        }

        // ‚úÖ Ajout d'un raccourci clavier pour fermer la modale (√âchap)
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeModal();
        });
    </script>
</body>
</html>
